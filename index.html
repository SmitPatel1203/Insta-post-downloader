<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <div class="container-fluid">
        <div id="header">
            <center>
                <h1>INSTA<span style="color: red">DOWNLOAD</span></h1>
            </center>
            <center>
                <h4>Instagram photo and video downloader</h4>
            </center>

            <div id="input-link">
                <center><input type="text" placeholder="https://instagram.com/profilename/41SW_pmmq4/"
                        width="80"><button class="btn btn-danger">Download</button></center>
            </div>
        </div>
        <center>
            <p><strong>Paste .. </strong>Make sure that the video is public before trying to download it!</p>
    </div>
    <script>

        $(document).ready(function () {

            $(".btn").click(function () {

                $.ajax({
                    url: "https://smitpatel1203.github.io/Insta-post-downloader/" + $("input").val(),
                    type: 'GET',
                    datatype: "jsonp",
                    crossDomain: true,
                    success: function (data) {
                        if ($(data).filter('meta[property="og:video"]').attr("content")) {
                            var downloadlink = $(data).filter('meta[property="og:video"]').attr("content");
                            var a = $("<a>")
                                .attr("href", downloadlink)
                                .attr("download", "video.mp4")
                                .appendTo("body");
                            a[0].click();
                            a.remove();
                        } else {
                            var downloadlink = $(data).filter('meta[property="og:image"]').attr("content");
                            var a = $("<a>")
                                .attr("href", downloadlink)
                                .attr("download", "img.png")
                                .appendTo("body");
                            a[0].click();
                            a.remove();
                        }

                    }
                });

            });
        });

    </script>
</body>

</html>